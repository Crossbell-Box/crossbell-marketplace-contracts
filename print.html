<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title></title>
        <meta name="robots" content="noindex" />


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="book.css">

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item "><a href="index.html">Home</a></li><li class="chapter-item affix "><li class="part-title">contracts</li><li class="chapter-item "><a href="contracts/interfaces/index.html">❱ interfaces</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="contracts/interfaces/IERC20Mintable.sol/interface.IERC20Mintable.html">IERC20Mintable</a></li><li class="chapter-item "><a href="contracts/interfaces/IMarketPlace.sol/interface.IMarketPlace.html">IMarketPlace</a></li><li class="chapter-item "><a href="contracts/interfaces/ISwap.sol/interface.ISwap.html">ISwap</a></li><li class="chapter-item "><a href="contracts/interfaces/IWCSB.sol/interface.IWCSB.html">IWCSB</a></li></ol></li><li class="chapter-item "><a href="contracts/libraries/index.html">❱ libraries</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="contracts/libraries/DataTypes.sol/library.DataTypes.html">DataTypes</a></li><li class="chapter-item "><a href="contracts/libraries/Events.sol/library.Events.html">Events</a></li></ol></li><li class="chapter-item "><a href="contracts/mocks/index.html">❱ mocks</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="contracts/mocks/MiraToken.sol/contract.MiraToken.html">MiraToken</a></li><li class="chapter-item "><a href="contracts/mocks/NFT.sol/contract.NFT.html">NFT</a></li><li class="chapter-item "><a href="contracts/mocks/NFT.sol/contract.NFT1155.html">NFT1155</a></li><li class="chapter-item "><a href="contracts/mocks/WCSB.sol/contract.WCSB.html">WCSB</a></li></ol></li><li class="chapter-item "><a href="contracts/storage/index.html">❱ storage</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="contracts/storage/MarketPlaceStorage.sol/contract.MarketPlaceStorage.html">MarketPlaceStorage</a></li></ol></li><li class="chapter-item "><a href="contracts/upgradeability/index.html">❱ upgradeability</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="contracts/upgradeability/TransparentUpgradeableProxy.sol/contract.TransparentUpgradeableProxy.html">TransparentUpgradeableProxy</a></li></ol></li><li class="chapter-item "><a href="contracts/MarketPlace.sol/contract.MarketPlace.html">MarketPlace</a></li><li class="chapter-item "><a href="contracts/Swap.sol/contract.Swap.html">Swap</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title"></h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/Crossbell-Box/crossbell-marketplace-contracts" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h2 id="crossbell-nft-marketplace"><a class="header" href="#crossbell-nft-marketplace">Crossbell NFT MarketPlace</a></h2>
<p><a href="https://github.com/Crossbell-Box/crossbell-marketplace-contracts/actions/workflows/docs.yml"><img src="https://github.com/Crossbell-Box/crossbell-marketplace-contracts/actions/workflows/docs.yml/badge.svg" alt="Docs" /></a>
<a href="https://github.com/Crossbell-Box/crossbell-marketplace-contracts/actions/workflows/lint.yml"><img src="https://github.com/Crossbell-Box/crossbell-marketplace-contracts/actions/workflows/lint.yml/badge.svg" alt="lint" /></a>
<a href="https://github.com/Crossbell-Box/crossbell-marketplace-contracts/actions/workflows/tests.yml"><img src="https://github.com/Crossbell-Box/crossbell-marketplace-contracts/actions/workflows/tests.yml/badge.svg" alt="tests" /></a>
<a href="https://github.com/Crossbell-Box/crossbell-marketplace-contracts/actions/workflows/checks.yml"><img src="https://github.com/Crossbell-Box/crossbell-marketplace-contracts/actions/workflows/checks.yml/badge.svg" alt="checks" /></a>
<a href="https://codecov.io/gh/Crossbell-Box/crossbell-marketplace-contracts"><img src="https://codecov.io/gh/Crossbell-Box/crossbell-marketplace-contracts/branch/main/graph/badge.svg?token=J5DF81HHEX" alt="codecov" /></a>
<a href="https://docs.mythx.io/dashboard/github-badges"><img src="https://badgen.net/https/api.mythx.io/v1/projects/e7178a58-97ab-4362-a5ab-2caa3fbd3a64/badge/data?cache=300&amp;icon=https://raw.githubusercontent.com/ConsenSys/mythx-github-badge/main/logo_white.svg" alt="MythXBadge" /></a></p>
<p><strong>Setup</strong></p>
<pre><code class="language-bash">yarn
</code></pre>
<p><strong>Testing</strong></p>
<pre><code class="language-bash">yarn test
</code></pre>
<p><strong>Deploy</strong></p>
<pre><code class="language-shell">npx hardhat run scripts/deployMarketPlace.ts
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents"><a class="header" href="#contents">Contents</a></h1>
<ul>
<li><a href="contracts/interfaces/IERC20Mintable.sol/interface.IERC20Mintable.html">IERC20Mintable</a></li>
<li><a href="contracts/interfaces/IMarketPlace.sol/interface.IMarketPlace.html">IMarketPlace</a></li>
<li><a href="contracts/interfaces/ISwap.sol/interface.ISwap.html">ISwap</a></li>
<li><a href="contracts/interfaces/IWCSB.sol/interface.IWCSB.html">IWCSB</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ierc20mintable"><a class="header" href="#ierc20mintable">IERC20Mintable</a></h1>
<p><a href="https://github.com/Crossbell-Box/crossbell-marketplace-contracts/blob/744d45a3ed40404ba40fa44834770bafb0e7f192/contracts/interfaces/IERC20Mintable.sol">Git Source</a></p>
<h2 id="functions"><a class="header" href="#functions">Functions</a></h2>
<h3 id="mint"><a class="header" href="#mint">mint</a></h3>
<pre><code class="language-solidity">function mint(address to, uint256 amount) external;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="imarketplace"><a class="header" href="#imarketplace">IMarketPlace</a></h1>
<p><a href="https://github.com/Crossbell-Box/crossbell-marketplace-contracts/blob/744d45a3ed40404ba40fa44834770bafb0e7f192/contracts/interfaces/IMarketPlace.sol">Git Source</a></p>
<h2 id="functions-1"><a class="header" href="#functions-1">Functions</a></h2>
<h3 id="initialize"><a class="header" href="#initialize">initialize</a></h3>
<p>Initializes the MarketPlace, setting the WCSB contract address.</p>
<pre><code class="language-solidity">function initialize(address wcsb_, address mira_, address admin) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>wcsb_</code></td><td><code>address</code></td><td>The address of WCSB contract.</td></tr>
<tr><td><code>mira_</code></td><td><code>address</code></td><td>The address of MIRA contract.</td></tr>
<tr><td><code>admin</code></td><td><code>address</code></td><td>The address of the contract admin.</td></tr>
</tbody></table>
</div>
<h3 id="pause"><a class="header" href="#pause">pause</a></h3>
<p>Pauses interaction with the contract.
Requirements:</p>
<ul>
<li>The caller must have the ADMIN_ROLE.</li>
</ul>
<pre><code class="language-solidity">function pause() external;
</code></pre>
<h3 id="unpause"><a class="header" href="#unpause">unpause</a></h3>
<p>Resumes interaction with the contract.
Requirements:</p>
<ul>
<li>The caller must have the ADMIN_ROLE.</li>
</ul>
<pre><code class="language-solidity">function unpause() external;
</code></pre>
<h3 id="ask"><a class="header" href="#ask">ask</a></h3>
<p>Creates an ask order for an NFT.
Emits the <code>AskCreated</code> event.</p>
<pre><code class="language-solidity">function ask(address nftAddress, uint256 tokenId, address payToken, uint256 price, uint256 deadline)
    external
    returns (uint256 orderId);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>nftAddress</code></td><td><code>address</code></td><td>The contract address of the NFT.</td></tr>
<tr><td><code>tokenId</code></td><td><code>uint256</code></td><td>The token id of the NFT to be sold.</td></tr>
<tr><td><code>payToken</code></td><td><code>address</code></td><td>The ERC20 token address for buyers to pay.</td></tr>
<tr><td><code>price</code></td><td><code>uint256</code></td><td>The sale price for the NFT.</td></tr>
<tr><td><code>deadline</code></td><td><code>uint256</code></td><td>The expiration timestamp of the ask order.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>orderId</code></td><td><code>uint256</code></td><td>The id of the new generated ask order.</td></tr>
</tbody></table>
</div>
<h3 id="updateask"><a class="header" href="#updateask">updateAsk</a></h3>
<p>Updates an ask order.
Emits the <code>AskUpdated</code> event.</p>
<pre><code class="language-solidity">function updateAsk(uint256 orderId, address payToken, uint256 price, uint256 deadline) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>orderId</code></td><td><code>uint256</code></td><td>The id of the ask order to be updated.</td></tr>
<tr><td><code>payToken</code></td><td><code>address</code></td><td>The ERC20 token address for buyers to pay.</td></tr>
<tr><td><code>price</code></td><td><code>uint256</code></td><td>The new sale price for the NFT.</td></tr>
<tr><td><code>deadline</code></td><td><code>uint256</code></td><td>The new expiration timestamp of the ask order.</td></tr>
</tbody></table>
</div>
<h3 id="cancelask"><a class="header" href="#cancelask">cancelAsk</a></h3>
<p>Cancels an ask order.
Emits the <code>AskCanceled</code> event.</p>
<pre><code class="language-solidity">function cancelAsk(uint256 orderId) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>orderId</code></td><td><code>uint256</code></td><td>The id of the ask order to be canceled.</td></tr>
</tbody></table>
</div>
<h3 id="acceptask"><a class="header" href="#acceptask">acceptAsk</a></h3>
<p>Accepts an ask order.
Emits the <code>OrdersMatched</code> event.</p>
<p><em>The amount of CSB to send must be specified in the <code>msg.value</code>.</em></p>
<pre><code class="language-solidity">function acceptAsk(uint256 orderId) external payable;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>orderId</code></td><td><code>uint256</code></td><td>The id of the ask order to be accepted.</td></tr>
</tbody></table>
</div>
<h3 id="bid"><a class="header" href="#bid">bid</a></h3>
<p>Creates a bid order for an NFT.
Emits the <code>BidCreated</code> event.</p>
<pre><code class="language-solidity">function bid(address nftAddress, uint256 tokenId, address payToken, uint256 price, uint256 deadline)
    external
    returns (uint256 orderId);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>nftAddress</code></td><td><code>address</code></td><td>The contract address of the NFT.</td></tr>
<tr><td><code>tokenId</code></td><td><code>uint256</code></td><td>The token id of the NFT to bid.</td></tr>
<tr><td><code>payToken</code></td><td><code>address</code></td><td>The ERC20 token address for buyers to pay.</td></tr>
<tr><td><code>price</code></td><td><code>uint256</code></td><td>The bid price for the NFT.</td></tr>
<tr><td><code>deadline</code></td><td><code>uint256</code></td><td>The expiration timestamp of the bid order.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>orderId</code></td><td><code>uint256</code></td><td>The id of the new generated bid order.</td></tr>
</tbody></table>
</div>
<h3 id="cancelbid"><a class="header" href="#cancelbid">cancelBid</a></h3>
<p>Cancels a bid order.
Emits the <code>BidCanceled</code> event.</p>
<pre><code class="language-solidity">function cancelBid(uint256 orderId) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>orderId</code></td><td><code>uint256</code></td><td>The id of the bid order to be canceled.</td></tr>
</tbody></table>
</div>
<h3 id="updatebid"><a class="header" href="#updatebid">updateBid</a></h3>
<p>Updates a bid order.
Emits the <code>BidUpdated</code> event.</p>
<pre><code class="language-solidity">function updateBid(uint256 orderId, address payToken, uint256 price, uint256 deadline) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>orderId</code></td><td><code>uint256</code></td><td>The id of the bid order to be updated.</td></tr>
<tr><td><code>payToken</code></td><td><code>address</code></td><td>The ERC20 token address for buyers to pay.</td></tr>
<tr><td><code>price</code></td><td><code>uint256</code></td><td>The new bid price for the NFT.</td></tr>
<tr><td><code>deadline</code></td><td><code>uint256</code></td><td>The new expiration timestamp of the ask order.</td></tr>
</tbody></table>
</div>
<h3 id="acceptbid"><a class="header" href="#acceptbid">acceptBid</a></h3>
<p>Accepts a bid order.
Emits the <code>OrdersMatched</code> event.</p>
<pre><code class="language-solidity">function acceptBid(uint256 orderId) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>orderId</code></td><td><code>uint256</code></td><td>The id of the bid order to be accepted.</td></tr>
</tbody></table>
</div>
<h3 id="getaskorder"><a class="header" href="#getaskorder">getAskOrder</a></h3>
<p>Gets the detail info of an ask order.</p>
<pre><code class="language-solidity">function getAskOrder(uint256 orderId) external view returns (DataTypes.Order memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>orderId</code></td><td><code>uint256</code></td><td>The id of the ask order to query.</td></tr>
</tbody></table>
</div>
<h3 id="getbidorder"><a class="header" href="#getbidorder">getBidOrder</a></h3>
<p>Gets the detail info of a bid order.</p>
<pre><code class="language-solidity">function getBidOrder(uint256 orderId) external view returns (DataTypes.Order memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>orderId</code></td><td><code>uint256</code></td><td>The id of the bid order to query.</td></tr>
</tbody></table>
</div>
<h3 id="getaskorderid"><a class="header" href="#getaskorderid">getAskOrderId</a></h3>
<p>Gets ID of an ask order .</p>
<pre><code class="language-solidity">function getAskOrderId(address nftAddress, uint256 tokenId, address owner) external view returns (uint256 orderId);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>nftAddress</code></td><td><code>address</code></td><td>The contract address of the NFT.</td></tr>
<tr><td><code>tokenId</code></td><td><code>uint256</code></td><td>The token id of the NFT to be sold.</td></tr>
<tr><td><code>owner</code></td><td><code>address</code></td><td>The owner who creates the order.</td></tr>
</tbody></table>
</div>
<h3 id="getbidorderid"><a class="header" href="#getbidorderid">getBidOrderId</a></h3>
<p>Gets ID of a bid order.</p>
<pre><code class="language-solidity">function getBidOrderId(address nftAddress, uint256 tokenId, address owner) external view returns (uint256 orderId);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>nftAddress</code></td><td><code>address</code></td><td>The contract address of the NFT.</td></tr>
<tr><td><code>tokenId</code></td><td><code>uint256</code></td><td>The token id of the NFT to bid.</td></tr>
<tr><td><code>owner</code></td><td><code>address</code></td><td>The owner who creates the order.</td></tr>
</tbody></table>
</div>
<h3 id="wcsb"><a class="header" href="#wcsb">wcsb</a></h3>
<p>Returns the address of WCSB contract.</p>
<pre><code class="language-solidity">function wcsb() external view returns (address);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>address</code></td><td>The address of WCSB contract.</td></tr>
</tbody></table>
</div>
<h3 id="mira"><a class="header" href="#mira">mira</a></h3>
<p>Returns the address of MIRA contract.</p>
<pre><code class="language-solidity">function mira() external view returns (address);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>address</code></td><td>The address of MIRA contract.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="iswap"><a class="header" href="#iswap">ISwap</a></h1>
<p><a href="https://github.com/Crossbell-Box/crossbell-marketplace-contracts/blob/744d45a3ed40404ba40fa44834770bafb0e7f192/contracts/interfaces/ISwap.sol">Git Source</a></p>
<h2 id="functions-2"><a class="header" href="#functions-2">Functions</a></h2>
<h3 id="initialize-1"><a class="header" href="#initialize-1">initialize</a></h3>
<p>Initializes the MarketPlace, setting the WCSB contract address.</p>
<pre><code class="language-solidity">function initialize(address mira_, uint256 minCsb_, uint256 minMira_, address admin) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>mira_</code></td><td><code>address</code></td><td>The address of MIRA contract.</td></tr>
<tr><td><code>minCsb_</code></td><td><code>uint256</code></td><td>The minimum amount of CSB to sell.</td></tr>
<tr><td><code>minMira_</code></td><td><code>uint256</code></td><td>The minimum amount of MIRA to sell.</td></tr>
<tr><td><code>admin</code></td><td><code>address</code></td><td>The address of the contract admin.</td></tr>
</tbody></table>
</div>
<h3 id="pause-1"><a class="header" href="#pause-1">pause</a></h3>
<p>Pauses interaction with the contract.
Requirements:</p>
<ul>
<li>The caller must have the ADMIN_ROLE.</li>
</ul>
<pre><code class="language-solidity">function pause() external;
</code></pre>
<h3 id="unpause-1"><a class="header" href="#unpause-1">unpause</a></h3>
<p>Resumes interaction with the contract.
Requirements:</p>
<ul>
<li>The caller must have the ADMIN_ROLE.</li>
</ul>
<pre><code class="language-solidity">function unpause() external;
</code></pre>
<h3 id="setminmira"><a class="header" href="#setminmira">setMinMira</a></h3>
<p>Sets the minimum amount of MIRA to sell.</p>
<pre><code class="language-solidity">function setMinMira(uint256 minMira_) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>minMira_</code></td><td><code>uint256</code></td><td>The minimum amount of MIRA to sell.</td></tr>
</tbody></table>
</div>
<h3 id="setmincsb"><a class="header" href="#setmincsb">setMinCsb</a></h3>
<p>Sets the minimum amount of CSB to sell.</p>
<pre><code class="language-solidity">function setMinCsb(uint256 minCsb_) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>minCsb_</code></td><td><code>uint256</code></td><td>The minimum amount of CSB to sell.</td></tr>
</tbody></table>
</div>
<h3 id="sellmira"><a class="header" href="#sellmira">sellMIRA</a></h3>
<p>Sells MIRA for CSB.
Creates a SellOrder and emits the <code>SellMIRA</code> event.</p>
<pre><code class="language-solidity">function sellMIRA(uint256 miraAmount, uint256 expectedCsbAmount) external returns (uint256 orderId);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>miraAmount</code></td><td><code>uint256</code></td><td>The amount of MIRA to sell.</td></tr>
<tr><td><code>expectedCsbAmount</code></td><td><code>uint256</code></td><td>The expected amount of CSB to receive.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>orderId</code></td><td><code>uint256</code></td><td>The new created order id.</td></tr>
</tbody></table>
</div>
<h3 id="sellcsb"><a class="header" href="#sellcsb">sellCSB</a></h3>
<p>Sells CSB for MIRA.
Creates a SellOrder and emits the <code>SellCSB</code> event.</p>
<p><em>The amount of CSB to sell must be specified in the <code>msg.value</code>.<br></em></p>
<pre><code class="language-solidity">function sellCSB(uint256 expectedMiraAmount) external payable returns (uint256 orderId);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>expectedMiraAmount</code></td><td><code>uint256</code></td><td>The expected amount of MIRA to receive.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>orderId</code></td><td><code>uint256</code></td><td>The new created order id.</td></tr>
</tbody></table>
</div>
<h3 id="cancelorder"><a class="header" href="#cancelorder">cancelOrder</a></h3>
<p>Cancels a sell order and refunds to the seller.
Deletes a given SellOrder and emits the <code>SellOrderCanceled</code> event.</p>
<pre><code class="language-solidity">function cancelOrder(uint256 orderId) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>orderId</code></td><td><code>uint256</code></td><td>The order id to cancel.</td></tr>
</tbody></table>
</div>
<h3 id="acceptorder"><a class="header" href="#acceptorder">acceptOrder</a></h3>
<p>Accepts a sell order and transfers the tokens to the traders.
Deletes a given SellOrder and emits the <code>SellOrderMatched</code> event.</p>
<pre><code class="language-solidity">function acceptOrder(uint256 orderId) external payable;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>orderId</code></td><td><code>uint256</code></td><td>The order id to accept.</td></tr>
</tbody></table>
</div>
<h3 id="getorder"><a class="header" href="#getorder">getOrder</a></h3>
<p>Returns the SellOrder struct of a given order id.</p>
<pre><code class="language-solidity">function getOrder(uint256 orderId) external view returns (DataTypes.SellOrder memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>orderId</code></td><td><code>uint256</code></td><td>The order id to get.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>DataTypes.SellOrder</code></td><td>order The SellOrder struct.</td></tr>
</tbody></table>
</div>
<h3 id="mira-1"><a class="header" href="#mira-1">mira</a></h3>
<p>Returns the address of MIRA contract.</p>
<pre><code class="language-solidity">function mira() external view returns (address);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>address</code></td><td>The address of MIRA contract.</td></tr>
</tbody></table>
</div>
<h3 id="getminmira"><a class="header" href="#getminmira">getMinMira</a></h3>
<p>Returns the minimum amount of MIRA to sell.</p>
<pre><code class="language-solidity">function getMinMira() external view returns (uint256);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>The minimum amount of MIRA to sell.</td></tr>
</tbody></table>
</div>
<h3 id="getmincsb"><a class="header" href="#getmincsb">getMinCsb</a></h3>
<p>Returns the minimum amount of CSB to sell.</p>
<pre><code class="language-solidity">function getMinCsb() external view returns (uint256);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>The minimum amount of CSB to sell.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="iwcsb"><a class="header" href="#iwcsb">IWCSB</a></h1>
<p><a href="https://github.com/Crossbell-Box/crossbell-marketplace-contracts/blob/744d45a3ed40404ba40fa44834770bafb0e7f192/contracts/interfaces/IWCSB.sol">Git Source</a></p>
<h2 id="functions-3"><a class="header" href="#functions-3">Functions</a></h2>
<h3 id="deposit"><a class="header" href="#deposit">deposit</a></h3>
<pre><code class="language-solidity">function deposit() external payable;
</code></pre>
<h3 id="transfer"><a class="header" href="#transfer">transfer</a></h3>
<pre><code class="language-solidity">function transfer(address to, uint256 value) external returns (bool);
</code></pre>
<h3 id="withdraw"><a class="header" href="#withdraw">withdraw</a></h3>
<pre><code class="language-solidity">function withdraw(uint256) external;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents-1"><a class="header" href="#contents-1">Contents</a></h1>
<ul>
<li><a href="contracts/libraries/DataTypes.sol/library.DataTypes.html">DataTypes</a></li>
<li><a href="contracts/libraries/Events.sol/library.Events.html">Events</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="datatypes"><a class="header" href="#datatypes">DataTypes</a></h1>
<p><a href="https://github.com/Crossbell-Box/crossbell-marketplace-contracts/blob/744d45a3ed40404ba40fa44834770bafb0e7f192/contracts/libraries/DataTypes.sol">Git Source</a></p>
<p>A standard library of data types.</p>
<h2 id="structs"><a class="header" href="#structs">Structs</a></h2>
<h3 id="order"><a class="header" href="#order">Order</a></h3>
<p><em>A struct containing the information of an NFT order.</em></p>
<pre><code class="language-solidity">struct Order {
    address owner;
    address nftAddress;
    uint256 tokenId;
    address payToken;
    uint256 price;
    uint256 deadline;
}
</code></pre>
<h3 id="sellorder"><a class="header" href="#sellorder">SellOrder</a></h3>
<p><em>A struct containing the information of a token sell order.</em></p>
<pre><code class="language-solidity">struct SellOrder {
    address owner;
    uint8 orderType;
    uint256 miraAmount;
    uint256 csbAmount;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="events"><a class="header" href="#events">Events</a></h1>
<p><a href="https://github.com/Crossbell-Box/crossbell-marketplace-contracts/blob/744d45a3ed40404ba40fa44834770bafb0e7f192/contracts/libraries/Events.sol">Git Source</a></p>
<h2 id="events-1"><a class="header" href="#events-1">Events</a></h2>
<h3 id="askcreated"><a class="header" href="#askcreated">AskCreated</a></h3>
<p>Emitted when an ask order is created.</p>
<pre><code class="language-solidity">event AskCreated(
    uint256 indexed orderId,
    address indexed owner,
    address indexed nftAddress,
    uint256 tokenId,
    address payToken,
    uint256 price,
    uint256 deadline
);
</code></pre>
<h3 id="askupdated"><a class="header" href="#askupdated">AskUpdated</a></h3>
<p>Emitted when an ask order is updated.</p>
<pre><code class="language-solidity">event AskUpdated(uint256 indexed orderId, address payToken, uint256 price, uint256 deadline);
</code></pre>
<h3 id="askcanceled"><a class="header" href="#askcanceled">AskCanceled</a></h3>
<p>Emitted when an ask order is canceled.</p>
<pre><code class="language-solidity">event AskCanceled(uint256 orderId);
</code></pre>
<h3 id="bidcreated"><a class="header" href="#bidcreated">BidCreated</a></h3>
<p>Emitted when a bid order is created.</p>
<pre><code class="language-solidity">event BidCreated(
    uint256 indexed orderId,
    address indexed owner,
    address indexed nftAddress,
    uint256 tokenId,
    address payToken,
    uint256 price,
    uint256 deadline
);
</code></pre>
<h3 id="bidcanceled"><a class="header" href="#bidcanceled">BidCanceled</a></h3>
<p>Emitted when a bid order is canceled.</p>
<pre><code class="language-solidity">event BidCanceled(uint256 indexed orderId);
</code></pre>
<h3 id="bidupdated"><a class="header" href="#bidupdated">BidUpdated</a></h3>
<p>Emitted when a bid order is updated.</p>
<pre><code class="language-solidity">event BidUpdated(uint256 indexed orderId, address payToken, uint256 price, uint256 deadline);
</code></pre>
<h3 id="askmatched"><a class="header" href="#askmatched">AskMatched</a></h3>
<p>Emitted when a ask order is accepted(matched).</p>
<pre><code class="language-solidity">event AskMatched(
    uint256 indexed orderId,
    address indexed owner,
    address indexed buyer,
    address nftAddress,
    uint256 tokenId,
    address payToken,
    uint256 price,
    address royaltyReceiver,
    uint256 royaltyAmount
);
</code></pre>
<h3 id="bidmatched"><a class="header" href="#bidmatched">BidMatched</a></h3>
<p>Emitted when a bid order is accepted(matched).</p>
<pre><code class="language-solidity">event BidMatched(
    uint256 indexed orderId,
    address indexed owner,
    address indexed seller,
    address nftAddress,
    uint256 tokenId,
    address payToken,
    uint256 price,
    address royaltyReceiver,
    uint256 royaltyAmount
);
</code></pre>
<h3 id="sellmira-1"><a class="header" href="#sellmira-1">SellMIRA</a></h3>
<pre><code class="language-solidity">event SellMIRA(address indexed owner, uint256 indexed miraAmount, uint256 indexed csbAmount, uint256 orderId);
</code></pre>
<h3 id="sellcsb-1"><a class="header" href="#sellcsb-1">SellCSB</a></h3>
<pre><code class="language-solidity">event SellCSB(address indexed owner, uint256 indexed csbAmount, uint256 indexed miraAmount, uint256 orderId);
</code></pre>
<h3 id="sellordercanceled"><a class="header" href="#sellordercanceled">SellOrderCanceled</a></h3>
<pre><code class="language-solidity">event SellOrderCanceled(uint256 indexed orderId);
</code></pre>
<h3 id="sellordermatched"><a class="header" href="#sellordermatched">SellOrderMatched</a></h3>
<pre><code class="language-solidity">event SellOrderMatched(uint256 indexed orderId, address indexed buyer);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents-2"><a class="header" href="#contents-2">Contents</a></h1>
<ul>
<li><a href="contracts/mocks/MiraToken.sol/contract.MiraToken.html">MiraToken</a></li>
<li><a href="contracts/mocks/NFT.sol/contract.NFT.html">NFT</a></li>
<li><a href="contracts/mocks/NFT.sol/contract.NFT1155.html">NFT1155</a></li>
<li><a href="contracts/mocks/WCSB.sol/contract.WCSB.html">WCSB</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="miratoken"><a class="header" href="#miratoken">MiraToken</a></h1>
<p><a href="https://github.com/Crossbell-Box/crossbell-marketplace-contracts/blob/744d45a3ed40404ba40fa44834770bafb0e7f192/contracts/mocks/MiraToken.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
AccessControlEnumerable, <a href="contracts/mocks/MiraToken.sol//contracts/interfaces/IERC20Mintable.sol/interface.IERC20Mintable.html">IERC20Mintable</a>, ERC777</p>
<h2 id="state-variables"><a class="header" href="#state-variables">State Variables</a></h2>
<h3 id="block_role"><a class="header" href="#block_role">BLOCK_ROLE</a></h3>
<pre><code class="language-solidity">bytes32 public constant BLOCK_ROLE = keccak256(&quot;BLOCK_ROLE&quot;);
</code></pre>
<h2 id="functions-4"><a class="header" href="#functions-4">Functions</a></h2>
<h3 id="constructor"><a class="header" href="#constructor">constructor</a></h3>
<pre><code class="language-solidity">constructor(string memory name_, string memory symbol_, address admin) ERC777(name_, symbol_, new address[](0));
</code></pre>
<h3 id="mint-1"><a class="header" href="#mint-1">mint</a></h3>
<p>*Creates <code>amount</code> new tokens for <code>to</code>.
Requirements:</p>
<ul>
<li>the caller must have the <code>DEFAULT_ADMIN_ROLE</code>.*</li>
</ul>
<pre><code class="language-solidity">function mint(address to, uint256 amount) external override onlyRole(DEFAULT_ADMIN_ROLE);
</code></pre>
<h3 id="renouncerole"><a class="header" href="#renouncerole">renounceRole</a></h3>
<p>*Revokes <code>role</code> from the calling account.
Requirements:</p>
<ul>
<li>the caller must have the <code>DEFAULT_ADMIN_ROLE</code>.*</li>
</ul>
<pre><code class="language-solidity">function renounceRole(bytes32 role, address account)
    public
    override(AccessControl, IAccessControl)
    onlyRole(DEFAULT_ADMIN_ROLE);
</code></pre>
<h3 id="_send"><a class="header" href="#_send">_send</a></h3>
<p><em>Blocks send tokens from account <code>from</code> who has the <code>BLOCK_ROLE</code>.</em></p>
<pre><code class="language-solidity">function _send(
    address from,
    address to,
    uint256 amount,
    bytes memory userData,
    bytes memory operatorData,
    bool requireReceptionAck
) internal override;
</code></pre>
<h3 id="_burn"><a class="header" href="#_burn">_burn</a></h3>
<p><em>Disables burn</em></p>
<pre><code class="language-solidity">function _burn(address, uint256, bytes memory, bytes memory) internal pure override;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="nft"><a class="header" href="#nft">NFT</a></h1>
<p><a href="https://github.com/Crossbell-Box/crossbell-marketplace-contracts/blob/744d45a3ed40404ba40fa44834770bafb0e7f192/contracts/mocks/NFT.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
ERC721Enumerable, ERC2981</p>
<h2 id="state-variables-1"><a class="header" href="#state-variables-1">State Variables</a></h2>
<h3 id="_tokencounter"><a class="header" href="#_tokencounter">_tokenCounter</a></h3>
<pre><code class="language-solidity">uint256 internal _tokenCounter;
</code></pre>
<h2 id="functions-5"><a class="header" href="#functions-5">Functions</a></h2>
<h3 id="constructor-1"><a class="header" href="#constructor-1">constructor</a></h3>
<pre><code class="language-solidity">constructor(string memory name_, string memory symbol_) ERC721(name_, symbol_);
</code></pre>
<h3 id="mint-2"><a class="header" href="#mint-2">mint</a></h3>
<pre><code class="language-solidity">function mint(address to) external returns (uint256 tokenId);
</code></pre>
<h3 id="settokenroyalty"><a class="header" href="#settokenroyalty">setTokenRoyalty</a></h3>
<pre><code class="language-solidity">function setTokenRoyalty(uint256 tokenId, address recipient, uint96 fraction) external;
</code></pre>
<h3 id="setdefaultroyalty"><a class="header" href="#setdefaultroyalty">setDefaultRoyalty</a></h3>
<pre><code class="language-solidity">function setDefaultRoyalty(address recipient, uint96 fraction) external;
</code></pre>
<h3 id="deletedefaultroyalty"><a class="header" href="#deletedefaultroyalty">deleteDefaultRoyalty</a></h3>
<pre><code class="language-solidity">function deleteDefaultRoyalty() external;
</code></pre>
<h3 id="supportsinterface"><a class="header" href="#supportsinterface">supportsInterface</a></h3>
<pre><code class="language-solidity">function supportsInterface(bytes4 interfaceId) public view virtual override(ERC2981, ERC721Enumerable) returns (bool);
</code></pre>
<h3 id="totalsupply"><a class="header" href="#totalsupply">totalSupply</a></h3>
<pre><code class="language-solidity">function totalSupply() public view override returns (uint256);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="nft1155"><a class="header" href="#nft1155">NFT1155</a></h1>
<p><a href="https://github.com/Crossbell-Box/crossbell-marketplace-contracts/blob/744d45a3ed40404ba40fa44834770bafb0e7f192/contracts/mocks/NFT.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
ERC1155</p>
<h2 id="functions-6"><a class="header" href="#functions-6">Functions</a></h2>
<h3 id="constructor-2"><a class="header" href="#constructor-2">constructor</a></h3>
<pre><code class="language-solidity">constructor() ERC1155(&quot;https://ipfsxxxx&quot;);
</code></pre>
<h3 id="mint-3"><a class="header" href="#mint-3">mint</a></h3>
<pre><code class="language-solidity">function mint(address to) public;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="wcsb-1"><a class="header" href="#wcsb-1">WCSB</a></h1>
<p><a href="https://github.com/Crossbell-Box/crossbell-marketplace-contracts/blob/744d45a3ed40404ba40fa44834770bafb0e7f192/contracts/mocks/WCSB.sol">Git Source</a></p>
<h2 id="state-variables-2"><a class="header" href="#state-variables-2">State Variables</a></h2>
<h3 id="name"><a class="header" href="#name">name</a></h3>
<pre><code class="language-solidity">string public name = &quot;Wrapped CSB&quot;;
</code></pre>
<h3 id="symbol"><a class="header" href="#symbol">symbol</a></h3>
<pre><code class="language-solidity">string public symbol = &quot;WCSB&quot;;
</code></pre>
<h3 id="decimals"><a class="header" href="#decimals">decimals</a></h3>
<pre><code class="language-solidity">uint8 public decimals = 18;
</code></pre>
<h3 id="balanceof"><a class="header" href="#balanceof">balanceOf</a></h3>
<pre><code class="language-solidity">mapping(address =&gt; uint256) public balanceOf;
</code></pre>
<h3 id="allowance"><a class="header" href="#allowance">allowance</a></h3>
<pre><code class="language-solidity">mapping(address =&gt; mapping(address =&gt; uint256)) public allowance;
</code></pre>
<h2 id="functions-7"><a class="header" href="#functions-7">Functions</a></h2>
<h3 id="receive"><a class="header" href="#receive">receive</a></h3>
<pre><code class="language-solidity">receive() external payable;
</code></pre>
<h3 id="deposit-1"><a class="header" href="#deposit-1">deposit</a></h3>
<pre><code class="language-solidity">function deposit() public payable;
</code></pre>
<h3 id="withdraw-1"><a class="header" href="#withdraw-1">withdraw</a></h3>
<pre><code class="language-solidity">function withdraw(uint256 wad) public;
</code></pre>
<h3 id="totalsupply-1"><a class="header" href="#totalsupply-1">totalSupply</a></h3>
<pre><code class="language-solidity">function totalSupply() public view returns (uint256);
</code></pre>
<h3 id="approve"><a class="header" href="#approve">approve</a></h3>
<pre><code class="language-solidity">function approve(address guy, uint256 wad) public returns (bool);
</code></pre>
<h3 id="transfer-1"><a class="header" href="#transfer-1">transfer</a></h3>
<pre><code class="language-solidity">function transfer(address dst, uint256 wad) public returns (bool);
</code></pre>
<h3 id="transferfrom"><a class="header" href="#transferfrom">transferFrom</a></h3>
<pre><code class="language-solidity">function transferFrom(address src, address dst, uint256 wad) public returns (bool);
</code></pre>
<h2 id="events-2"><a class="header" href="#events-2">Events</a></h2>
<h3 id="approval"><a class="header" href="#approval">Approval</a></h3>
<pre><code class="language-solidity">event Approval(address indexed src, address indexed guy, uint256 wad);
</code></pre>
<h3 id="transfer-2"><a class="header" href="#transfer-2">Transfer</a></h3>
<pre><code class="language-solidity">event Transfer(address indexed src, address indexed dst, uint256 wad);
</code></pre>
<h3 id="deposit-2"><a class="header" href="#deposit-2">Deposit</a></h3>
<pre><code class="language-solidity">event Deposit(address indexed dst, uint256 wad);
</code></pre>
<h3 id="withdrawal"><a class="header" href="#withdrawal">Withdrawal</a></h3>
<pre><code class="language-solidity">event Withdrawal(address indexed src, uint256 wad);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents-3"><a class="header" href="#contents-3">Contents</a></h1>
<ul>
<li><a href="contracts/storage/MarketPlaceStorage.sol/contract.MarketPlaceStorage.html">MarketPlaceStorage</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="marketplacestorage"><a class="header" href="#marketplacestorage">MarketPlaceStorage</a></h1>
<p><a href="https://github.com/Crossbell-Box/crossbell-marketplace-contracts/blob/744d45a3ed40404ba40fa44834770bafb0e7f192/contracts/storage/MarketPlaceStorage.sol">Git Source</a></p>
<h2 id="state-variables-3"><a class="header" href="#state-variables-3">State Variables</a></h2>
<h3 id="_wcsb"><a class="header" href="#_wcsb">_wcsb</a></h3>
<pre><code class="language-solidity">address internal _wcsb;
</code></pre>
<h3 id="_mira"><a class="header" href="#_mira">_mira</a></h3>
<pre><code class="language-solidity">address internal _mira;
</code></pre>
<h3 id="_askordercount"><a class="header" href="#_askordercount">_askOrderCount</a></h3>
<pre><code class="language-solidity">uint256 internal _askOrderCount;
</code></pre>
<h3 id="_askorders"><a class="header" href="#_askorders">_askOrders</a></h3>
<pre><code class="language-solidity">mapping(uint256 =&gt; DataTypes.Order) internal _askOrders;
</code></pre>
<h3 id="_askorderids"><a class="header" href="#_askorderids">_askOrderIds</a></h3>
<pre><code class="language-solidity">mapping(address =&gt; mapping(uint256 =&gt; mapping(address =&gt; uint256))) internal _askOrderIds;
</code></pre>
<h3 id="_bidordercount"><a class="header" href="#_bidordercount">_bidOrderCount</a></h3>
<pre><code class="language-solidity">uint256 internal _bidOrderCount;
</code></pre>
<h3 id="_bidorders"><a class="header" href="#_bidorders">_bidOrders</a></h3>
<pre><code class="language-solidity">mapping(uint256 =&gt; DataTypes.Order) internal _bidOrders;
</code></pre>
<h3 id="_bidorderids"><a class="header" href="#_bidorderids">_bidOrderIds</a></h3>
<pre><code class="language-solidity">mapping(address =&gt; mapping(uint256 =&gt; mapping(address =&gt; uint256))) internal _bidOrderIds;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents-4"><a class="header" href="#contents-4">Contents</a></h1>
<ul>
<li><a href="contracts/upgradeability/TransparentUpgradeableProxy.sol/contract.TransparentUpgradeableProxy.html">TransparentUpgradeableProxy</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="transparentupgradeableproxy"><a class="header" href="#transparentupgradeableproxy">TransparentUpgradeableProxy</a></h1>
<p><a href="https://github.com/Crossbell-Box/crossbell-marketplace-contracts/blob/744d45a3ed40404ba40fa44834770bafb0e7f192/contracts/upgradeability/TransparentUpgradeableProxy.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
ERC1967Proxy</p>
<p>*This contract implements a proxy that is upgradeable by an admin.
To avoid https://medium.com/nomic-labs-blog/malicious-backdoors-in-ethereum-proxies-62629adf3357[proxy selector
clashing], which can potentially be used in an attack, this contract uses the
https://blog.openzeppelin.com/the-transparent-proxy-pattern/[transparent proxy pattern]. This pattern implies two
things that go hand in hand:</p>
<ol>
<li>If any account other than the admin calls the proxy, the call will be forwarded to the implementation, even if
that call matches one of the admin functions exposed by the proxy itself.</li>
<li>If the admin calls the proxy, it can access the admin functions, but its calls will never be forwarded to the
implementation. If the admin tries to call a function on the implementation it will fail with an error that says
&quot;admin cannot fallback to proxy target&quot;.
These properties mean that the admin account can only be used for admin actions like upgrading the proxy or changing
the admin, so it's best if it's a dedicated account that is not used for anything else. This will avoid headaches due
to sudden errors when trying to call a function from the proxy implementation.
Our recommendation is for the dedicated account to be an instance of the {ProxyAdmin} contract. If set up this way,
you should think of the <code>ProxyAdmin</code> instance as the real administrative interface of your proxy.*</li>
</ol>
<h2 id="functions-8"><a class="header" href="#functions-8">Functions</a></h2>
<h3 id="constructor-3"><a class="header" href="#constructor-3">constructor</a></h3>
<p><em>Initializes an upgradeable proxy managed by <code>_admin</code>, backed by the implementation at <code>_logic</code>, and
optionally initialized with <code>_data</code> as explained in {ERC1967Proxy-constructor}.</em></p>
<pre><code class="language-solidity">constructor(address _logic, address admin_, bytes memory _data) payable ERC1967Proxy(_logic, _data);
</code></pre>
<h3 id="ifadmin"><a class="header" href="#ifadmin">ifAdmin</a></h3>
<p><em>Modifier used internally that will delegate the call to the implementation unless the sender is the admin.</em></p>
<pre><code class="language-solidity">modifier ifAdmin();
</code></pre>
<h3 id="admin"><a class="header" href="#admin">admin</a></h3>
<p><em>Returns the current admin.
NOTE: Only the admin can call this function. See {ProxyAdmin-getProxyAdmin}.
TIP: To get this value clients can read directly from the storage slot shown below (specified by EIP1967) using the
https://eth.wiki/json-rpc/API#eth_getstorageat[<code>eth_getStorageAt</code>] RPC call.
<code>0xb53127684a568b3173ae13b9f8a6016e243e63b6e8ee1178d6a717850b5d6103</code></em></p>
<pre><code class="language-solidity">function admin() external ifAdmin returns (address admin_);
</code></pre>
<h3 id="implementation"><a class="header" href="#implementation">implementation</a></h3>
<p><em>Returns the current implementation.
NOTE: Only the admin can call this function. See {ProxyAdmin-getProxyImplementation}.
TIP: To get this value clients can read directly from the storage slot shown below (specified by EIP1967) using the
https://eth.wiki/json-rpc/API#eth_getstorageat[<code>eth_getStorageAt</code>] RPC call.
<code>0x360894a13ba1a3210667c828492db98dca3e2076cc3735a920a3ca505d382bbc</code></em></p>
<pre><code class="language-solidity">function implementation() external ifAdmin returns (address implementation_);
</code></pre>
<h3 id="changeadmin"><a class="header" href="#changeadmin">changeAdmin</a></h3>
<p><em>Changes the admin of the proxy.
Emits an {AdminChanged} event.
NOTE: Only the admin can call this function. See {ProxyAdmin-changeProxyAdmin}.</em></p>
<pre><code class="language-solidity">function changeAdmin(address newAdmin) external virtual ifAdmin;
</code></pre>
<h3 id="upgradeto"><a class="header" href="#upgradeto">upgradeTo</a></h3>
<p><em>Upgrade the implementation of the proxy.
NOTE: Only the admin can call this function. See {ProxyAdmin-upgrade}.</em></p>
<pre><code class="language-solidity">function upgradeTo(address newImplementation) external ifAdmin;
</code></pre>
<h3 id="upgradetoandcall"><a class="header" href="#upgradetoandcall">upgradeToAndCall</a></h3>
<p><em>Upgrade the implementation of the proxy, and then call a function from the new implementation as specified
by <code>data</code>, which should be an encoded function call. This is useful to initialize new storage variables in the
proxied contract.
NOTE: Only the admin can call this function. See {ProxyAdmin-upgradeAndCall}.</em></p>
<pre><code class="language-solidity">function upgradeToAndCall(address newImplementation, bytes calldata data) external payable ifAdmin;
</code></pre>
<h3 id="_admin"><a class="header" href="#_admin">_admin</a></h3>
<p><em>Returns the current admin.</em></p>
<pre><code class="language-solidity">function _admin() internal view virtual returns (address);
</code></pre>
<h3 id="_beforefallback"><a class="header" href="#_beforefallback">_beforeFallback</a></h3>
<p><em>Makes sure the admin cannot access the fallback function. See {Proxy-_beforeFallback}.</em></p>
<pre><code class="language-solidity">function _beforeFallback() internal virtual override;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="marketplace"><a class="header" href="#marketplace">MarketPlace</a></h1>
<p><a href="https://github.com/Crossbell-Box/crossbell-marketplace-contracts/blob/744d45a3ed40404ba40fa44834770bafb0e7f192/contracts/MarketPlace.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
<a href="contracts/MarketPlace.sol//contracts/interfaces/IMarketPlace.sol/interface.IMarketPlace.html">IMarketPlace</a>, Context, ReentrancyGuard, Initializable, IERC777Recipient, Pausable, AccessControlEnumerable, <a href="contracts/MarketPlace.sol//contracts/storage/MarketPlaceStorage.sol/contract.MarketPlaceStorage.html">MarketPlaceStorage</a></p>
<h2 id="state-variables-4"><a class="header" href="#state-variables-4">State Variables</a></h2>
<h3 id="interface_id_erc721"><a class="header" href="#interface_id_erc721">INTERFACE_ID_ERC721</a></h3>
<pre><code class="language-solidity">bytes4 public constant INTERFACE_ID_ERC721 = 0x80ac58cd;
</code></pre>
<h3 id="interface_id_erc2981"><a class="header" href="#interface_id_erc2981">INTERFACE_ID_ERC2981</a></h3>
<pre><code class="language-solidity">bytes4 public constant INTERFACE_ID_ERC2981 = 0x2a55205a;
</code></pre>
<h3 id="admin_role"><a class="header" href="#admin_role">ADMIN_ROLE</a></h3>
<pre><code class="language-solidity">bytes32 public constant ADMIN_ROLE = keccak256(&quot;ADMIN_ROLE&quot;);
</code></pre>
<h3 id="erc1820_registry"><a class="header" href="#erc1820_registry">ERC1820_REGISTRY</a></h3>
<pre><code class="language-solidity">IERC1820Registry public constant ERC1820_REGISTRY = IERC1820Registry(0x1820a4B7618BdE71Dce8cdc73aAB6C95905faD24);
</code></pre>
<h3 id="tokens_recipient_interface_hash"><a class="header" href="#tokens_recipient_interface_hash">TOKENS_RECIPIENT_INTERFACE_HASH</a></h3>
<pre><code class="language-solidity">bytes32 public constant TOKENS_RECIPIENT_INTERFACE_HASH = keccak256(&quot;ERC777TokensRecipient&quot;);
</code></pre>
<h2 id="functions-9"><a class="header" href="#functions-9">Functions</a></h2>
<h3 id="validpaytoken"><a class="header" href="#validpaytoken">validPayToken</a></h3>
<pre><code class="language-solidity">modifier validPayToken(address payToken);
</code></pre>
<h3 id="validdeadline"><a class="header" href="#validdeadline">validDeadline</a></h3>
<pre><code class="language-solidity">modifier validDeadline(uint256 deadline);
</code></pre>
<h3 id="validprice"><a class="header" href="#validprice">validPrice</a></h3>
<pre><code class="language-solidity">modifier validPrice(uint256 price);
</code></pre>
<h3 id="constructor-4"><a class="header" href="#constructor-4">constructor</a></h3>
<pre><code class="language-solidity">constructor();
</code></pre>
<h3 id="initialize-2"><a class="header" href="#initialize-2">initialize</a></h3>
<p>Initializes the MarketPlace, setting the WCSB contract address.</p>
<pre><code class="language-solidity">function initialize(address wcsb_, address mira_, address admin) external override initializer;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>wcsb_</code></td><td><code>address</code></td><td>The address of WCSB contract.</td></tr>
<tr><td><code>mira_</code></td><td><code>address</code></td><td>The address of MIRA contract.</td></tr>
<tr><td><code>admin</code></td><td><code>address</code></td><td>The address of the contract admin.</td></tr>
</tbody></table>
</div>
<h3 id="pause-2"><a class="header" href="#pause-2">pause</a></h3>
<p>Pauses interaction with the contract.
Requirements:</p>
<ul>
<li>The caller must have the ADMIN_ROLE.</li>
</ul>
<pre><code class="language-solidity">function pause() external override whenNotPaused onlyRole(ADMIN_ROLE);
</code></pre>
<h3 id="unpause-2"><a class="header" href="#unpause-2">unpause</a></h3>
<p>Resumes interaction with the contract.
Requirements:</p>
<ul>
<li>The caller must have the ADMIN_ROLE.</li>
</ul>
<pre><code class="language-solidity">function unpause() external override whenPaused onlyRole(ADMIN_ROLE);
</code></pre>
<h3 id="tokensreceived"><a class="header" href="#tokensreceived">tokensReceived</a></h3>
<p><em>Called by an {IERC777} token contract whenever tokens are being
moved or created into a registered account <code>to</code> (this contract). <br>
Users can directly send MIRA tokens to this contract to accept an ask order,
the <code>tokensReceived</code> method will be called by MIRA token.
The userData/operatorData should be an abi encoded bytes of <code>uint256</code>,
which represents <code>orderId</code> of the ask order.</em></p>
<pre><code class="language-solidity">function tokensReceived(
    address,
    address from,
    address to,
    uint256 amount,
    bytes calldata userData,
    bytes calldata operatorData
) external override(IERC777Recipient);
</code></pre>
<h3 id="ask-1"><a class="header" href="#ask-1">ask</a></h3>
<p>Creates an ask order for an NFT.
Emits the <code>AskCreated</code> event.</p>
<pre><code class="language-solidity">function ask(address nftAddress, uint256 tokenId, address payToken, uint256 price, uint256 deadline)
    external
    override
    whenNotPaused
    validPayToken(payToken)
    validDeadline(deadline)
    validPrice(price)
    returns (uint256 orderId);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>nftAddress</code></td><td><code>address</code></td><td>The contract address of the NFT.</td></tr>
<tr><td><code>tokenId</code></td><td><code>uint256</code></td><td>The token id of the NFT to be sold.</td></tr>
<tr><td><code>payToken</code></td><td><code>address</code></td><td>The ERC20 token address for buyers to pay.</td></tr>
<tr><td><code>price</code></td><td><code>uint256</code></td><td>The sale price for the NFT.</td></tr>
<tr><td><code>deadline</code></td><td><code>uint256</code></td><td>The expiration timestamp of the ask order.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>orderId</code></td><td><code>uint256</code></td><td>The id of the new generated ask order.</td></tr>
</tbody></table>
</div>
<h3 id="updateask-1"><a class="header" href="#updateask-1">updateAsk</a></h3>
<p>Updates an ask order.
Emits the <code>AskUpdated</code> event.</p>
<pre><code class="language-solidity">function updateAsk(uint256 orderId, address payToken, uint256 price, uint256 deadline)
    external
    override
    whenNotPaused
    validPayToken(payToken)
    validDeadline(deadline)
    validPrice(price);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>orderId</code></td><td><code>uint256</code></td><td>The id of the ask order to be updated.</td></tr>
<tr><td><code>payToken</code></td><td><code>address</code></td><td>The ERC20 token address for buyers to pay.</td></tr>
<tr><td><code>price</code></td><td><code>uint256</code></td><td>The new sale price for the NFT.</td></tr>
<tr><td><code>deadline</code></td><td><code>uint256</code></td><td>The new expiration timestamp of the ask order.</td></tr>
</tbody></table>
</div>
<h3 id="cancelask-1"><a class="header" href="#cancelask-1">cancelAsk</a></h3>
<p>Cancels an ask order.
Emits the <code>AskCanceled</code> event.</p>
<pre><code class="language-solidity">function cancelAsk(uint256 orderId) external override;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>orderId</code></td><td><code>uint256</code></td><td>The id of the ask order to be canceled.</td></tr>
</tbody></table>
</div>
<h3 id="acceptask-1"><a class="header" href="#acceptask-1">acceptAsk</a></h3>
<p>Accepts an ask order.
Emits the <code>OrdersMatched</code> event.</p>
<p><em>The amount of CSB to send must be specified in the <code>msg.value</code>.</em></p>
<pre><code class="language-solidity">function acceptAsk(uint256 orderId) external payable override nonReentrant whenNotPaused;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>orderId</code></td><td><code>uint256</code></td><td>The id of the ask order to be accepted.</td></tr>
</tbody></table>
</div>
<h3 id="bid-1"><a class="header" href="#bid-1">bid</a></h3>
<p>Creates a bid order for an NFT.
Emits the <code>BidCreated</code> event.</p>
<pre><code class="language-solidity">function bid(address nftAddress, uint256 tokenId, address payToken, uint256 price, uint256 deadline)
    external
    override
    whenNotPaused
    validPayToken(payToken)
    validDeadline(deadline)
    validPrice(price)
    returns (uint256 orderId);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>nftAddress</code></td><td><code>address</code></td><td>The contract address of the NFT.</td></tr>
<tr><td><code>tokenId</code></td><td><code>uint256</code></td><td>The token id of the NFT to bid.</td></tr>
<tr><td><code>payToken</code></td><td><code>address</code></td><td>The ERC20 token address for buyers to pay.</td></tr>
<tr><td><code>price</code></td><td><code>uint256</code></td><td>The bid price for the NFT.</td></tr>
<tr><td><code>deadline</code></td><td><code>uint256</code></td><td>The expiration timestamp of the bid order.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>orderId</code></td><td><code>uint256</code></td><td>The id of the new generated bid order.</td></tr>
</tbody></table>
</div>
<h3 id="cancelbid-1"><a class="header" href="#cancelbid-1">cancelBid</a></h3>
<p>Cancels a bid order.
Emits the <code>BidCanceled</code> event.</p>
<pre><code class="language-solidity">function cancelBid(uint256 orderId) external override;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>orderId</code></td><td><code>uint256</code></td><td>The id of the bid order to be canceled.</td></tr>
</tbody></table>
</div>
<h3 id="updatebid-1"><a class="header" href="#updatebid-1">updateBid</a></h3>
<p>Updates a bid order.
Emits the <code>BidUpdated</code> event.</p>
<pre><code class="language-solidity">function updateBid(uint256 orderId, address payToken, uint256 price, uint256 deadline)
    external
    override
    whenNotPaused
    validPayToken(payToken)
    validDeadline(deadline)
    validPrice(price);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>orderId</code></td><td><code>uint256</code></td><td>The id of the bid order to be updated.</td></tr>
<tr><td><code>payToken</code></td><td><code>address</code></td><td>The ERC20 token address for buyers to pay.</td></tr>
<tr><td><code>price</code></td><td><code>uint256</code></td><td>The new bid price for the NFT.</td></tr>
<tr><td><code>deadline</code></td><td><code>uint256</code></td><td>The new expiration timestamp of the ask order.</td></tr>
</tbody></table>
</div>
<h3 id="acceptbid-1"><a class="header" href="#acceptbid-1">acceptBid</a></h3>
<p>Accepts a bid order.
Emits the <code>OrdersMatched</code> event.</p>
<pre><code class="language-solidity">function acceptBid(uint256 orderId) external override nonReentrant whenNotPaused;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>orderId</code></td><td><code>uint256</code></td><td>The id of the bid order to be accepted.</td></tr>
</tbody></table>
</div>
<h3 id="getaskorder-1"><a class="header" href="#getaskorder-1">getAskOrder</a></h3>
<p>Gets the detail info of an ask order.</p>
<pre><code class="language-solidity">function getAskOrder(uint256 orderId) external view override returns (DataTypes.Order memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>orderId</code></td><td><code>uint256</code></td><td>The id of the ask order to query.</td></tr>
</tbody></table>
</div>
<h3 id="getbidorder-1"><a class="header" href="#getbidorder-1">getBidOrder</a></h3>
<p>Gets the detail info of a bid order.</p>
<pre><code class="language-solidity">function getBidOrder(uint256 orderId) external view override returns (DataTypes.Order memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>orderId</code></td><td><code>uint256</code></td><td>The id of the bid order to query.</td></tr>
</tbody></table>
</div>
<h3 id="getaskorderid-1"><a class="header" href="#getaskorderid-1">getAskOrderId</a></h3>
<p>Gets ID of an ask order .</p>
<pre><code class="language-solidity">function getAskOrderId(address nftAddress, uint256 tokenId, address owner)
    external
    view
    override
    returns (uint256 orderId);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>nftAddress</code></td><td><code>address</code></td><td>The contract address of the NFT.</td></tr>
<tr><td><code>tokenId</code></td><td><code>uint256</code></td><td>The token id of the NFT to be sold.</td></tr>
<tr><td><code>owner</code></td><td><code>address</code></td><td>The owner who creates the order.</td></tr>
</tbody></table>
</div>
<h3 id="getbidorderid-1"><a class="header" href="#getbidorderid-1">getBidOrderId</a></h3>
<p>Gets ID of a bid order.</p>
<pre><code class="language-solidity">function getBidOrderId(address nftAddress, uint256 tokenId, address owner)
    external
    view
    override
    returns (uint256 orderId);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>nftAddress</code></td><td><code>address</code></td><td>The contract address of the NFT.</td></tr>
<tr><td><code>tokenId</code></td><td><code>uint256</code></td><td>The token id of the NFT to bid.</td></tr>
<tr><td><code>owner</code></td><td><code>address</code></td><td>The owner who creates the order.</td></tr>
</tbody></table>
</div>
<h3 id="wcsb-2"><a class="header" href="#wcsb-2">wcsb</a></h3>
<p>Returns the address of WCSB contract.</p>
<pre><code class="language-solidity">function wcsb() external view override returns (address);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>address</code></td><td>The address of WCSB contract.</td></tr>
</tbody></table>
</div>
<h3 id="mira-2"><a class="header" href="#mira-2">mira</a></h3>
<p>Returns the address of MIRA contract.</p>
<pre><code class="language-solidity">function mira() external view override returns (address);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>address</code></td><td>The address of MIRA contract.</td></tr>
</tbody></table>
</div>
<h3 id="_pay"><a class="header" href="#_pay">_pay</a></h3>
<pre><code class="language-solidity">function _pay(
    address from,
    address to,
    address payToken,
    uint256 amount,
    address royaltyReceiver,
    uint256 royaltyAmount,
    uint256 erc777Amount
) internal;
</code></pre>
<h3 id="_acceptask"><a class="header" href="#_acceptask">_acceptAsk</a></h3>
<pre><code class="language-solidity">function _acceptAsk(uint256 orderId, address buyer, uint256 erc777Amount) internal whenNotPaused;
</code></pre>
<h3 id="_paycsbwithroyalty"><a class="header" href="#_paycsbwithroyalty">_payCSBWithRoyalty</a></h3>
<pre><code class="language-solidity">function _payCSBWithRoyalty(address to, uint256 amount, address royaltyReceiver, uint256 royaltyAmount) internal;
</code></pre>
<h3 id="_payerc777withroyalty"><a class="header" href="#_payerc777withroyalty">_payERC777WithRoyalty</a></h3>
<pre><code class="language-solidity">function _payERC777WithRoyalty(
    address to,
    address token,
    uint256 amount,
    address royaltyReceiver,
    uint256 royaltyAmount,
    uint256 erc777Amount
) internal;
</code></pre>
<h3 id="_payerc20withroyalty"><a class="header" href="#_payerc20withroyalty">_payERC20WithRoyalty</a></h3>
<pre><code class="language-solidity">function _payERC20WithRoyalty(
    address from,
    address to,
    address token,
    uint256 amount,
    address royaltyReceiver,
    uint256 royaltyAmount
) internal;
</code></pre>
<h3 id="_royaltyinfo"><a class="header" href="#_royaltyinfo">_royaltyInfo</a></h3>
<pre><code class="language-solidity">function _royaltyInfo(address nftAddress, uint256 tokenId, uint256 salePrice)
    internal
    view
    returns (address royaltyReceiver, uint256 royaltyAmount);
</code></pre>
<h3 id="_now"><a class="header" href="#_now">_now</a></h3>
<pre><code class="language-solidity">function _now() internal view virtual returns (uint256);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="swap"><a class="header" href="#swap">Swap</a></h1>
<p><a href="https://github.com/Crossbell-Box/crossbell-marketplace-contracts/blob/744d45a3ed40404ba40fa44834770bafb0e7f192/contracts/Swap.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
<a href="contracts/Swap.sol//contracts/interfaces/ISwap.sol/interface.ISwap.html">ISwap</a>, Context, IERC777Recipient, Initializable, ReentrancyGuard, Pausable, AccessControlEnumerable</p>
<h2 id="state-variables-5"><a class="header" href="#state-variables-5">State Variables</a></h2>
<h3 id="_mira-1"><a class="header" href="#_mira-1">_mira</a></h3>
<pre><code class="language-solidity">address internal _mira;
</code></pre>
<h3 id="_mincsb"><a class="header" href="#_mincsb">_minCsb</a></h3>
<pre><code class="language-solidity">uint256 internal _minCsb;
</code></pre>
<h3 id="_minmira"><a class="header" href="#_minmira">_minMira</a></h3>
<pre><code class="language-solidity">uint256 internal _minMira;
</code></pre>
<h3 id="_orders"><a class="header" href="#_orders">_orders</a></h3>
<pre><code class="language-solidity">mapping(uint256 =&gt; DataTypes.SellOrder) internal _orders;
</code></pre>
<h3 id="_ordercount"><a class="header" href="#_ordercount">_orderCount</a></h3>
<pre><code class="language-solidity">uint256 internal _orderCount;
</code></pre>
<h3 id="sell_mira"><a class="header" href="#sell_mira">SELL_MIRA</a></h3>
<pre><code class="language-solidity">uint8 public constant SELL_MIRA = 1;
</code></pre>
<h3 id="sell_csb"><a class="header" href="#sell_csb">SELL_CSB</a></h3>
<pre><code class="language-solidity">uint8 public constant SELL_CSB = 2;
</code></pre>
<h3 id="operation_type_accept_order"><a class="header" href="#operation_type_accept_order">OPERATION_TYPE_ACCEPT_ORDER</a></h3>
<pre><code class="language-solidity">uint256 public constant OPERATION_TYPE_ACCEPT_ORDER = 1;
</code></pre>
<h3 id="operation_type_sell_mira"><a class="header" href="#operation_type_sell_mira">OPERATION_TYPE_SELL_MIRA</a></h3>
<pre><code class="language-solidity">uint256 public constant OPERATION_TYPE_SELL_MIRA = 2;
</code></pre>
<h3 id="erc1820_registry-1"><a class="header" href="#erc1820_registry-1">ERC1820_REGISTRY</a></h3>
<pre><code class="language-solidity">IERC1820Registry public constant ERC1820_REGISTRY = IERC1820Registry(0x1820a4B7618BdE71Dce8cdc73aAB6C95905faD24);
</code></pre>
<h3 id="tokens_recipient_interface_hash-1"><a class="header" href="#tokens_recipient_interface_hash-1">TOKENS_RECIPIENT_INTERFACE_HASH</a></h3>
<pre><code class="language-solidity">bytes32 public constant TOKENS_RECIPIENT_INTERFACE_HASH = keccak256(&quot;ERC777TokensRecipient&quot;);
</code></pre>
<h3 id="admin_role-1"><a class="header" href="#admin_role-1">ADMIN_ROLE</a></h3>
<pre><code class="language-solidity">bytes32 public constant ADMIN_ROLE = keccak256(&quot;ADMIN_ROLE&quot;);
</code></pre>
<h2 id="functions-10"><a class="header" href="#functions-10">Functions</a></h2>
<h3 id="constructor-5"><a class="header" href="#constructor-5">constructor</a></h3>
<pre><code class="language-solidity">constructor();
</code></pre>
<h3 id="initialize-3"><a class="header" href="#initialize-3">initialize</a></h3>
<p>Initializes the MarketPlace, setting the WCSB contract address.</p>
<pre><code class="language-solidity">function initialize(address mira_, uint256 minCsb_, uint256 minMira_, address admin) external override initializer;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>mira_</code></td><td><code>address</code></td><td>The address of MIRA contract.</td></tr>
<tr><td><code>minCsb_</code></td><td><code>uint256</code></td><td>The minimum amount of CSB to sell.</td></tr>
<tr><td><code>minMira_</code></td><td><code>uint256</code></td><td>The minimum amount of MIRA to sell.</td></tr>
<tr><td><code>admin</code></td><td><code>address</code></td><td>The address of the contract admin.</td></tr>
</tbody></table>
</div>
<h3 id="pause-3"><a class="header" href="#pause-3">pause</a></h3>
<p>Pauses interaction with the contract.
Requirements:</p>
<ul>
<li>The caller must have the ADMIN_ROLE.</li>
</ul>
<pre><code class="language-solidity">function pause() external override whenNotPaused onlyRole(ADMIN_ROLE);
</code></pre>
<h3 id="unpause-3"><a class="header" href="#unpause-3">unpause</a></h3>
<p>Resumes interaction with the contract.
Requirements:</p>
<ul>
<li>The caller must have the ADMIN_ROLE.</li>
</ul>
<pre><code class="language-solidity">function unpause() external override whenPaused onlyRole(ADMIN_ROLE);
</code></pre>
<h3 id="setminmira-1"><a class="header" href="#setminmira-1">setMinMira</a></h3>
<p>Sets the minimum amount of MIRA to sell.</p>
<pre><code class="language-solidity">function setMinMira(uint256 minMira_) external override onlyRole(ADMIN_ROLE);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>minMira_</code></td><td><code>uint256</code></td><td>The minimum amount of MIRA to sell.</td></tr>
</tbody></table>
</div>
<h3 id="setmincsb-1"><a class="header" href="#setmincsb-1">setMinCsb</a></h3>
<p>Sets the minimum amount of CSB to sell.</p>
<pre><code class="language-solidity">function setMinCsb(uint256 minCsb_) external override onlyRole(ADMIN_ROLE);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>minCsb_</code></td><td><code>uint256</code></td><td>The minimum amount of CSB to sell.</td></tr>
</tbody></table>
</div>
<h3 id="tokensreceived-1"><a class="header" href="#tokensreceived-1">tokensReceived</a></h3>
<p>Called by an {IERC777} token contract whenever tokens are being
moved or created into a registered account <code>to</code> (this contract). <br>
The userData/operatorData should be an abi encoded bytes of two <code>uint256</code>,
the first uint256 represents operation type. <br>
opType = 1: accept an order.<br>
opType = 2: sell MIRA for CSB.</p>
<pre><code class="language-solidity">function tokensReceived(
    address,
    address from,
    address to,
    uint256 amount,
    bytes calldata userData,
    bytes calldata operatorData
) external override(IERC777Recipient);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>address</code></td><td></td></tr>
<tr><td><code>from</code></td><td><code>address</code></td><td>The address sending the tokens.</td></tr>
<tr><td><code>to</code></td><td><code>address</code></td><td>The address of the recipient.</td></tr>
<tr><td><code>amount</code></td><td><code>uint256</code></td><td>The amount of tokens being transferred.</td></tr>
<tr><td><code>userData</code></td><td><code>bytes</code></td><td>The data provided by the token holder.</td></tr>
<tr><td><code>operatorData</code></td><td><code>bytes</code></td><td>The data provided by the operator (if any).</td></tr>
</tbody></table>
</div>
<h3 id="sellmira-2"><a class="header" href="#sellmira-2">sellMIRA</a></h3>
<p>Sells MIRA for CSB.
Creates a SellOrder and emits the <code>SellMIRA</code> event.</p>
<pre><code class="language-solidity">function sellMIRA(uint256 miraAmount, uint256 expectedCsbAmount) external override returns (uint256 orderId);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>miraAmount</code></td><td><code>uint256</code></td><td>The amount of MIRA to sell.</td></tr>
<tr><td><code>expectedCsbAmount</code></td><td><code>uint256</code></td><td>The expected amount of CSB to receive.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>orderId</code></td><td><code>uint256</code></td><td>The new created order id.</td></tr>
</tbody></table>
</div>
<h3 id="sellcsb-2"><a class="header" href="#sellcsb-2">sellCSB</a></h3>
<p>Sells CSB for MIRA.
Creates a SellOrder and emits the <code>SellCSB</code> event.</p>
<p><em>The amount of CSB to sell must be specified in the <code>msg.value</code>.<br></em></p>
<pre><code class="language-solidity">function sellCSB(uint256 expectedMiraAmount) external payable override whenNotPaused returns (uint256 orderId);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>expectedMiraAmount</code></td><td><code>uint256</code></td><td>The expected amount of MIRA to receive.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>orderId</code></td><td><code>uint256</code></td><td>The new created order id.</td></tr>
</tbody></table>
</div>
<h3 id="cancelorder-1"><a class="header" href="#cancelorder-1">cancelOrder</a></h3>
<p>Cancels a sell order and refunds to the seller.
Deletes a given SellOrder and emits the <code>SellOrderCanceled</code> event.</p>
<pre><code class="language-solidity">function cancelOrder(uint256 orderId) external override whenNotPaused nonReentrant;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>orderId</code></td><td><code>uint256</code></td><td>The order id to cancel.</td></tr>
</tbody></table>
</div>
<h3 id="acceptorder-1"><a class="header" href="#acceptorder-1">acceptOrder</a></h3>
<p>Accepts a sell order and transfers the tokens to the traders.
Deletes a given SellOrder and emits the <code>SellOrderMatched</code> event.</p>
<pre><code class="language-solidity">function acceptOrder(uint256 orderId) external payable override;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>orderId</code></td><td><code>uint256</code></td><td>The order id to accept.</td></tr>
</tbody></table>
</div>
<h3 id="getorder-1"><a class="header" href="#getorder-1">getOrder</a></h3>
<p>Returns the SellOrder struct of a given order id.</p>
<pre><code class="language-solidity">function getOrder(uint256 orderId) external view override returns (DataTypes.SellOrder memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>orderId</code></td><td><code>uint256</code></td><td>The order id to get.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>DataTypes.SellOrder</code></td><td>order The SellOrder struct.</td></tr>
</tbody></table>
</div>
<h3 id="mira-3"><a class="header" href="#mira-3">mira</a></h3>
<p>Returns the address of MIRA contract.</p>
<pre><code class="language-solidity">function mira() external view override returns (address);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>address</code></td><td>The address of MIRA contract.</td></tr>
</tbody></table>
</div>
<h3 id="getminmira-1"><a class="header" href="#getminmira-1">getMinMira</a></h3>
<p>Returns the minimum amount of MIRA to sell.</p>
<pre><code class="language-solidity">function getMinMira() external view override returns (uint256);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>The minimum amount of MIRA to sell.</td></tr>
</tbody></table>
</div>
<h3 id="getmincsb-1"><a class="header" href="#getmincsb-1">getMinCsb</a></h3>
<p>Returns the minimum amount of CSB to sell.</p>
<pre><code class="language-solidity">function getMinCsb() external view override returns (uint256);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>The minimum amount of CSB to sell.</td></tr>
</tbody></table>
</div>
<h3 id="_sellmira"><a class="header" href="#_sellmira">_sellMIRA</a></h3>
<pre><code class="language-solidity">function _sellMIRA(address owner, uint256 miraAmount, uint256 expectedCsbAmount, bool onTokensReceived)
    internal
    nonReentrant
    whenNotPaused
    returns (uint256 orderId);
</code></pre>
<h3 id="_acceptorder"><a class="header" href="#_acceptorder">_acceptOrder</a></h3>
<pre><code class="language-solidity">function _acceptOrder(uint256 orderId, address buyer, uint256 erc777Amount) internal nonReentrant whenNotPaused;
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->
        <script src="solidity.min.js"></script>

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
